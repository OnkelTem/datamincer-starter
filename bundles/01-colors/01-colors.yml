vars:
  buildName: 'DmsCss3Colors'
  buildPath:
    field: concat
    items: ['build/', '@bundle.name']
  deckGroup: 'DataMincer.Starter'
  deckName: 'CSS3 Colors'
  deckCode: '@vars.buildName'
  url:
    field: githuburl

generators:
  BuildDeck:
    workers:
      - worker: csv
        data:
          field: file
          path: 140-css3-colors.csv
        columns:
          color: color
          code: code
      - worker: crowdankideck
        build:
          name: '@vars.buildName'
          path: '@vars.buildPath'
        deck:
          uuid:
            field: uuid
          name:
            field: concat
            items: ['@vars.deckGroup', '@vars.deckName']
            glue: '::'
          desc:
            field: twig
            template:
              field: file
              path: desc.twig
        config:
          uuid:
            field: uuid
          name: '@vars.deckCode'
        model:
          uuid:
            field: uuid
          name: '@vars.deckCode'
          templates:
            main:
              field: twig
              template:
                field: file
                path: 'template.twig'
          css:
            field: file
            path: 'template.css'
        note:
          fields:
            color: '@row.color'
            code: '@row.code'
          guid:
            field: guid
        defaults:
          config:
            new:
              order: 0
          model:
            req: [[0, 'all', [2]]]
