vars:
  code: 'DMS-01-COLOR'
  prefix: 'DataMincer.Starter'
  name: '@bundle.name'

generators:
  - workers:
      - worker: csv
        data:
          field: file
          path: 140-css3-colors.csv
        columns:
          color: color
          code: code
      - worker: crowdankideck
        build:
          name: '@vars.name'
          path:
            field: concat
            items: ['build/', '@bundle.name']
        deck:
          uuid:
            field: uuid
          name:
            field: concat
            items: ['@vars.prefix', '@vars.name']
            glue: '::'
          desc:
            field: twig
            template:
              field: file
              path: desc.twig
            params:
              deck: '@vars.name'
        config:
          uuid:
            field: uuid
          name:
            field: concat
            items: ['@vars.code', '_CFG']
        model:
          uuid:
            field: uuid
          name:
            field: concat
            items: ['@vars.code', '_MDL']
          templates:
            main:
              field: twig
              template:
                field: file
                path: 'template.twig'
          css:
            field: file
            path: 'template.css'
        note:
          fields:
            color: '@row.color'
            code: '@row.code'
          guid:
            field: guid
        defaults:
          config:
            new:
              order: 0
          model:
            req: [[0, 'all', [2]]]
